<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <!-- Form View Inherit - SIMPLE VERSION -->
  <record id="view_warehouse_orderpoint_form_dc" model="ir.ui.view">
    <field name="name">stock.warehouse.orderpoint.form.dc</field>
    <field name="model">stock.warehouse.orderpoint</field>
    <field name="inherit_id" ref="stock.view_warehouse_orderpoint_form"/>
    <field name="arch" type="xml">
      
      <!-- Add DC Configuration fields -->
      <xpath expr="//sheet" position="inside">
        <group name="dc_config" string="Distribution Center Configuration">
          <field name="dc_company_id" options="{'no_create': True}"/>
          <field name="dc_warehouse_id" options="{'no_create': True}"
                 attrs="{'invisible': [('dc_company_id', '=', False)], 'required': [('dc_company_id', '!=', False)]}"/>
          <field name="auto_create_dc_so" attrs="{'invisible': [('dc_company_id', '=', False)]}"/>
        </group>
      </xpath>

    </field>
  </record>

  <!-- Search View -->
  <record id="view_warehouse_orderpoint_search_dc" model="ir.ui.view">
    <field name="name">stock.warehouse.orderpoint.search.dc</field>
    <field name="model">stock.warehouse.orderpoint</field>
    <field name="arch" type="xml">
      <search>
        <field name="name"/>
        <field name="product_id"/>
        <field name="warehouse_id"/>
        <field name="dc_company_id"/>
        
        <filter name="with_dc" string="With DC Company" domain="[('dc_company_id','!=',False)]"/>
        <filter name="auto_dc_so" string="Auto DC SO" domain="[('auto_create_dc_so','=',True)]"/>
        
        <group expand="0" string="Group By">
          <filter name="group_product" string="Product" context="{'group_by':'product_id'}"/>
          <filter name="group_warehouse" string="Warehouse" context="{'group_by':'warehouse_id'}"/>
          <filter name="group_dc_company" string="DC Company" context="{'group_by':'dc_company_id'}"/>
        </group>
      </search>
    </field>
  </record>

</odoo>
